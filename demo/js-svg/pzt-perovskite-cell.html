<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PZT Perovskite Unit Cell (Complete Octahedron, z-distortion)</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: #eee;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    text-align: center;
  }

  h2 {
    margin: 20px 0;
    font-weight: 600;
  }

  svg {
    display: block;
    margin: 0 auto;
    background: #1a1a1a;
  }

  /* Atoms */
  .pb { fill: #aaa; }       /* Pb : A-site (large, background) */
  .o  { fill: #4aa3df; }    /* O  : framework */
  .b  { fill: #e74c3c; }    /* Zr/Ti : B-site (active) */

  /* Octahedral edges (thin, subtle) */
  .lattice {
    stroke: #9bb7cc;
    stroke-width: 1;
    opacity: 0.35;
    fill: none;
  }

  /* z-axis guide (optional) */
  .axis {
    stroke: #777;
    stroke-width: 1;
    stroke-dasharray: 4 4;
    opacity: 0.45;
  }
</style>
</head>

<body>
<h2>PZT Perovskite Unit Cell (Complete Octahedron, z-Distortion)</h2>

<svg width="800" height="800" viewBox="0 0 500 500">

  <!-- z-axis guide -->
  <line x1="250" y1="80" x2="250" y2="420" class="axis"/>
  <text x="258" y="95" fill="#aaa">z</text>

  <!-- Oxygen atoms (fixed) -->
  <!-- Top / Bottom (z±) -->
  <circle id="Otop" class="o" cx="250" cy="180" r="5"/>
  <circle id="Obot" class="o" cx="250" cy="320" r="5"/>

  <!-- Equatorial (±x, ±y) -->
  <circle id="Oleft"  class="o" cx="210" cy="250" r="5"/>
  <circle id="Oright" class="o" cx="290" cy="250" r="5"/>
  <circle id="Oup"    class="o" cx="250" cy="210" r="5"/>
  <circle id="Odown"  class="o" cx="250" cy="290" r="5"/>

  <!-- Complete O6 octahedron (12 edges) -->
  <g id="octa" class="lattice">
    <!-- Top apex connections -->
    <line id="e_t_left"  x1="250" y1="180" x2="210" y2="250"/>
    <line id="e_t_right" x1="250" y1="180" x2="290" y2="250"/>
    <line id="e_t_up"    x1="250" y1="180" x2="250" y2="210"/>
    <line id="e_t_down"  x1="250" y1="180" x2="250" y2="290"/>

    <!-- Bottom apex connections -->
    <line id="e_b_left"  x1="250" y1="320" x2="210" y2="250"/>
    <line id="e_b_right" x1="250" y1="320" x2="290" y2="250"/>
    <line id="e_b_up"    x1="250" y1="320" x2="250" y2="210"/>
    <line id="e_b_down"  x1="250" y1="320" x2="250" y2="290"/>

    <!-- Equatorial square (xy plane, fixed) -->
    <line x1="210" y1="250" x2="250" y2="210"/>
    <line x1="250" y1="210" x2="290" y2="250"/>
    <line x1="290" y1="250" x2="250" y2="290"/>
    <line x1="250" y1="290" x2="210" y2="250"/>
  </g>

  <!-- Pb atoms (A-site, projected corners) -->
  <circle class="pb" cx="200" cy="200" r="8"/>
  <circle class="pb" cx="300" cy="200" r="8"/>
  <circle class="pb" cx="200" cy="300" r="8"/>
  <circle class="pb" cx="300" cy="300" r="8"/>

  <!-- B-site (Zr/Ti) -->
  <circle id="bsite" class="b" cx="250" cy="250" r="6.5"/>

</svg>

<script>
let t = 0;

// B-site atom
const bsite = document.getElementById("bsite");

// Top edges
const eTL = document.getElementById("e_t_left");
const eTR = document.getElementById("e_t_right");
const eTU = document.getElementById("e_t_up");
const eTD = document.getElementById("e_t_down");

// Bottom edges
const eBL = document.getElementById("e_b_left");
const eBR = document.getElementById("e_b_right");
const eBU = document.getElementById("e_b_up");
const eBD = document.getElementById("e_b_down");

// Fixed oxygen positions
const O = {
  top:  { x:250, y:180 },
  bot:  { x:250, y:320 },
  left: { x:210, y:250 },
  right:{ x:290, y:250 },
  up:   { x:250, y:210 },
  down: { x:250, y:290 }
};

// Helper to update line endpoints
function setLine(line, p1, p2) {
  line.setAttribute("x1", p1.x);
  line.setAttribute("y1", p1.y);
  line.setAttribute("x2", p2.x);
  line.setAttribute("y2", p2.y);
}

setInterval(() => {
  t += 0.05;

  // B-site off-centering (primary effect)
  const dz = Math.sin(t) * 10;
  bsite.setAttribute("cy", 250 - dz);

  // Octahedral relaxation along z (secondary, smaller, phase-delayed)
  const relax = Math.sin(t - 0.6) * 3;

  const topP = { x: O.top.x, y: O.top.y - relax };
  const botP = { x: O.bot.x, y: O.bot.y + relax };

  // Update top edges
  setLine(eTL, topP, O.left);
  setLine(eTR, topP, O.right);
  setLine(eTU, topP, O.up);
  setLine(eTD, topP, O.down);

  // Update bottom edges
  setLine(eBL, botP, O.left);
  setLine(eBR, botP, O.right);
  setLine(eBU, botP, O.up);
  setLine(eBD, botP, O.down);

}, 50);
</script>

</body>
</html>
