<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>PZT ペロブスカイト単位胞（結晶構造重視）</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: #eee;
    font-family: system-ui, sans-serif;
    text-align: center;
  }

  h2 {
    margin: 20px 0;
    font-weight: 600;
  }

  svg {
    display: block;
    margin: 0 auto;
    background: #1a1a1a;
  }

  /* 原子 */
  .pb { fill: #aaa; }       /* Pb : 大 */
  .o  { fill: #4aa3df; }    /* O  : 小 */
  .b  { fill: #e74c3c; }    /* Zr/Ti : 中 */

  /* 結晶ワイヤーフレーム（O6八面体） */
  .lattice {
    stroke: #9bb7cc;
    stroke-width: 1;
    opacity: 0.35;
    fill: none;
  }

  /* z軸ガイド */
  .axis {
    stroke: #777;
    stroke-width: 1;
    stroke-dasharray: 4 4;
    opacity: 0.5;
  }
</style>
</head>

<body>
<h2>PZT ペロブスカイト単位胞（結晶構造重視）</h2>

<svg width="800" height="800" viewBox="0 0 500 500">

  <!-- z軸 -->
  <line x1="250" y1="80" x2="250" y2="420" class="axis"/>
  <text x="258" y="95" fill="#aaa">z</text>

  <!-- O 原子（面心） -->
  <circle class="o" cx="250" cy="180" r="5"/>
  <circle class="o" cx="250" cy="320" r="5"/>
  <circle class="o" cx="210" cy="250" r="5"/>
  <circle class="o" cx="290" cy="250" r="5"/>
  <circle class="o" cx="250" cy="210" r="5"/>
  <circle class="o" cx="250" cy="290" r="5"/>

  <!-- O6 八面体ワイヤーフレーム -->
  <g id="octa" class="lattice">

    <!-- z方向 -->
    <line id="oz_top"    x1="250" y1="180" x2="250" y2="210"/>
    <line id="oz_bottom" x1="250" y1="290" x2="250" y2="320"/>

    <!-- 上面 -->
    <line x1="210" y1="250" x2="250" y2="210"/>
    <line x1="250" y1="210" x2="290" y2="250"/>

    <!-- 下面 -->
    <line x1="210" y1="250" x2="250" y2="290"/>
    <line x1="250" y1="290" x2="290" y2="250"/>

  </g>

  <!-- Pb（Aサイト・角：投影） -->
  <circle class="pb" cx="200" cy="200" r="8"/>
  <circle class="pb" cx="300" cy="200" r="8"/>
  <circle class="pb" cx="200" cy="300" r="8"/>
  <circle class="pb" cx="300" cy="300" r="8"/>

  <!-- Zr/Ti（Bサイト） -->
  <circle id="bsite" class="b" cx="250" cy="250" r="6.5"/>

</svg>

<script>
let t = 0;

const bsite     = document.getElementById("bsite");
const ozTop     = document.getElementById("oz_top");
const ozBottom  = document.getElementById("oz_bottom");

setInterval(() => {
  t += 0.05;

  /* Bサイトのオフセンタ変位（主役） */
  const dz = Math.sin(t) * 10;
  bsite.setAttribute("cy", 250 - dz);

  /* 八面体のz方向緩和（受動・小さく・位相遅れ） */
  const relax = Math.sin(t - 0.6) * 3;

  /* 上側O-O */
  ozTop.setAttribute("y1", 180 - relax);
  ozTop.setAttribute("y2", 210 - relax);

  /* 下側O-O */
  ozBottom.setAttribute("y1", 290 + relax);
  ozBottom.setAttribute("y2", 320 + relax);

}, 50);
</script>

</body>
</html>
